# ARC
## ARC란?
ARC(Automatic Reference Counting) 는 자동으로 메모리를 관리해주는 방식을 말한다.

## 동작 방식
클래스의 새로운 인스턴스를 만들 때 ARC 가 메모리 할당을 해준다. 
그리고 인스턴스가 더 이상 사용 되지 않는다고 판단 할 때(참조 카운팅이 0일 때) 메모리를 해제한다. 
- 레퍼런스의 Instance가 메모리 공간에 할당되면 레퍼런스 카운트가 1 증가
- Instance 가 해제되면 레퍼런스 카운트가 1 감소
- 레퍼런스 카운트가 0이 되면 자동으로 레퍼런스 메모리를 해제시킨다.

이렇게 동작하는 이유는, 아래 글에서도 나와있듯이, 어떠한 인스턴스, 또는 그 인스턴스의 속성들에 접근을 해야되는데, 그 인스턴스가 메모리에서 해제되었으면 오류가 발생할것이다. 
그래서 ARC 가 그 인스턴스를 가리키는 다른 인스턴스의 개수를 세다가, count의 수가 없을때(0개 일때) 메모리에서 해제하는 것이다.

## 컴파일 타임 vs 런타임
- 컴파일 타임
- ARC에서 인스턴스의 생명주기는 컴파일 타임때 결정된다.
- `retain`, `release` 코드를 적절한 곳에 컴파일타이때 넣어주는게 `ARC` 가 해주는 것.

## ARC가 가져다주는 이점은?
메모리 해제의 예측이 가능해서 관리를 해줄 수 있다

## ARC가 메모리 해제를 할 수 없는 상황은?
두개 의 클래스 인스턴스가 서로에 대한 strong 참조를 하고 있어서 ARC 가 메모리 해제를 못하는 상황. 
(reference count 가 0개가 될 수 없기 때문에)

### 해결 방안
클래스 간의 관계를 strong 이 아닌 weak, unowned 로 지정. 그럼 순환참조 없이 인스턴스들이 서로 참조 할 수 있다.

# 참고자료
클래스의 새로운 인스턴스를 만들 때 ARC 가 메모리 할당을 해준다. 그리고 인스턴스가 더 이상 사용 되지 않는다고 판단 할 때(참조 카운팅이 0일 때) 메모리를 해제한다. 
